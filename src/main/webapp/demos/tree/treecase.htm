<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <title></title>
    <script src="../../js/jquery/jquery-1.7.2.js" type="text/javascript"></script>
    <link href="../../js/jui/skins/Aqua/css/jui-all.css" rel="stylesheet" type="text/css" />
    <!--<script src="../../js/jui/js/core/base.js" type="text/javascript"></script>-->
    <!--<script src="../../js/jui/js/plugins/juiceTree.js" type="text/javascript"></script>-->
    <!--<script src="../../js/jui/js/plugins/juiceTip.js" type="text/javascript"></script>-->
    <script src="../../js/jui/js/jui-all.js" type="text/javascript"></script>
    <script type="text/javascript">
        var manager = null;

        $(".l-tree .l-body span").live('mouseover', function (e) {
            if (!this.title) 
                this.title = $(this).text();
        });

        $(function ()
        {
            $("#tree1").juiceTree(
            {
//                url: 'tree.json',
//                nodeWidth : 40,
//                onBeforeExpand: onBeforeExpand,
//                onExpand: onExpand
            });
            manager = $("#tree1").juiceGetTreeManager();
        });
     
        function onBeforeExpand(note)
        {
            if (note.data.children && note.data.children.length == 0)
            {
                //这里模拟一个加载节点的方法，append方法也用loadData(target,url)代替
                manager.append(note.target, [
                { text: note.data.text + "'s child1" },
                { text: note.data.text + "'s child2" },
                { text: note.data.text + "'s child3" }
               ]);
            }
        }
        function onExpand(note)
        { 
        }

    </script>
</head>
<body style="padding:10px"> 
    <h4>模拟异步动态加载节点</h4> 
    <div  style="height: 500px;width: 300px;overflow: auto">
    <ul id="tree1" url="../tree/data/tree.json"  onBeforeExpand="onBeforeExpand" onExpand="onExpand" >
        <li isexpand="false"><span>第一个节点</span><ul></ul></li>
        <li isexpand="false"><span>第二个节点</span><ul></ul></li>
    </ul> 
    </div>
        <div style="display:none">
     
    </div>
</body>
</html>
