(function(){CodeMirror.defaults.closeTagEnabled=true;CodeMirror.defaults.closeTagIndent=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];CodeMirror.defaults.closeTagVoid=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];CodeMirror.defineExtension("closeTag",function(n,f,i,k){if(!n.getOption("closeTagEnabled")){throw CodeMirror.Pass}var j=n.getOption("mode");if(j=="text/html"||j=="xml"){var m=n.getCursor();var o=n.getTokenAt(m);var g=o.state;if(g.mode&&g.mode!="html"){throw CodeMirror.Pass}if(f==">"){var l=g.htmlState?g.htmlState.type:g.type;if(o.className=="tag"&&l=="closeTag"){throw CodeMirror.Pass}n.replaceSelection(">");m={line:m.line,ch:m.ch+1};n.setCursor(m);o=n.getTokenAt(n.getCursor());g=o.state;l=g.htmlState?g.htmlState.type:g.type;if(o.className=="tag"&&l!="selfcloseTag"){var h=g.htmlState?g.htmlState.tagName:g.tagName;if(h.length>0&&e(n,k,h)){a(n,i,m,h)}return}n.setSelection({line:m.line,ch:m.ch-1},m);n.replaceSelection("")}else{if(f=="/"){if(o.className=="tag"&&o.string=="<"){var h=g.htmlState?(g.htmlState.context?g.htmlState.context.tagName:""):(g.context?g.context.tagName:"");if(h.length>0){b(n,m,h);return}}}}}throw CodeMirror.Pass});function a(g,f,i,h){if(c(g,f,h)){g.replaceSelection("\n\n</"+h+">","end");g.indentLine(i.line+1);g.indentLine(i.line+2);g.setCursor({line:i.line+1,ch:g.getLine(i.line+1).length})}else{g.replaceSelection("</"+h+">");g.setCursor(i)}}function c(g,f,h){if(typeof f=="undefined"||f==null||f==true){f=g.getOption("closeTagIndent")}if(!f){f=[]}return d(f,h.toLowerCase())!=-1}function e(f,g,h){if(f.getOption("mode")=="xml"){return true}if(typeof g=="undefined"||g==null){g=f.getOption("closeTagVoid")}if(!g){g=[]}return d(g,h.toLowerCase())==-1}function d(j,f){if(j.indexOf){return j.indexOf(f)}for(var g=0,h=j.length;g<h;++g){if(j[g]==f){return g}}return -1}function b(f,h,g){f.replaceSelection("/"+g+">");f.setCursor({line:h.line,ch:h.ch+g.length+2})}})();