(function(){function a(b,e){var d=b.getWrapperElement();var c=d.insertBefore(document.createElement("div"),d.firstChild);c.className="CodeMirror-dialog";c.innerHTML="<div>"+e+"</div>";return c}CodeMirror.defineExtension("openDialog",function(d,h){var c=a(this,d);var b=false,f=this;function g(){if(b){return}b=true;c.parentNode.removeChild(c)}var e=c.getElementsByTagName("input")[0];if(e){CodeMirror.connect(e,"keydown",function(i){if(i.keyCode==13||i.keyCode==27){CodeMirror.e_stop(i);g();f.focus();if(i.keyCode==13){h(e.value)}}});e.focus();CodeMirror.connect(e,"blur",g)}return g});CodeMirror.defineExtension("openConfirm",function(l,f){var g=a(this,l);var h=g.getElementsByTagName("button");var e=false,j=this,c=1;function m(){if(e){return}e=true;g.parentNode.removeChild(g);j.focus()}h[0].focus();for(var d=0;d<h.length;++d){var k=h[d];(function(b){CodeMirror.connect(k,"click",function(i){CodeMirror.e_preventDefault(i);m();if(b){b(j)}})})(f[d]);CodeMirror.connect(k,"blur",function(){--c;setTimeout(function(){if(c<=0){m()}},200)});CodeMirror.connect(k,"focus",function(){++c})}})})();